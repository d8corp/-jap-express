"use strict";var n,e=(n=require("jap"))&&"object"==typeof n&&"default"in n?n.default:n,t=require("express");module.exports=function(n,i,o,r,u,f){return void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===r&&(r=function(){}),void 0===u&&(u=function(){}),function(c,d){t.json()(c,d,(function(t){if(!t){var a=[];r(c,d);var s=e("function"==typeof n?new n(c,d):n,c.body,i,o,a,f||n);u(c,d);var v=function(){return d.end(JSON.stringify(s))};a.length?Promise.all(a).then(v,v):v()}}))}};
